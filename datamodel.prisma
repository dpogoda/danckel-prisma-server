type User {
  id: ID! @id
  createdAt: DateTime! @createdAt
  updatedAt: DateTime! @updatedAt
  roomnumber: Int! @unique
  username: String
  password: String!
  fixrequests: [FixRequest!]! @relation(name: "UserFixRequests")
  likes: [FixRequest!]! @relation(name: "UserLikes")
  dislikes: [FixRequest!]! @relation(name: "UserDislikes")
  roles: [Role!]! @scalarList(strategy: RELATION)
	floor: [Floor!]! @relation(name: "UserFloor")
  marketplaceitems: [MarketplaceItem!]! @relation(name: "UserMarketPlaceItem")
  chatrooms: [UserChatroom!]! @relation(name: "UserChatroom")
}

type FixRequest {
  id: ID! @id
  createdAt: DateTime! @createdAt
  updatedAt: DateTime! @updatedAt
  author: User! @relation(name: "UserFixRequests")
  title: String!
  text: String!
  likes: [User!]! @relation(name: "UserLikes")
  dislikes: [User!]! @relation(name: "UserDislikes")
  state: FixRequestState! @default(value: OPEN)
}

type Floor {
	id: ID! @id
  createdAt: DateTime! @createdAt
  updatedAt: DateTime! @updatedAt
	floor: Int!
	color: String!
	remainingFloorMoney: Int!
	members: [User!]! @relation(name: "UserFloor")
}

type News {
	id: ID! @id
	createdAt: DateTime! @createdAt
	updatedAt: DateTime! @updatedAt
	title: String!
	text: String!
}

type MarketplaceItem {
  id: ID! @id
  createdAt: DateTime! @createdAt
  updatedAt: DateTime! @updatedAt
  title: String!
  text: String!
  price: Float!
  pictures: [String!]!
  user: User! @relation(name: "UserMarketPlaceItem")
  chatroom: Chatroom! @relation(name: "MarketplaceItemChatroom")
}

type Chatroom {
  id: ID! @id
  createdAt: DateTime! @createdAt
  updatedAt: DateTime! @updatedAt
  title: String!
  members: [User!]! @relation(name: "UserChatroom")
  messages: [messages!]! @relation(name: "ChatroomMessage")
  marketplaceitem: MarketplaceItem @relation(name: "MarketplaceItemChatroom")
}

type Message {
  id: ID! @id
  createdAt: DateTime! @createdAt
  updatedAt: DateTime! @updatedAt
  type: MessageType! @scalarList(strategy: RELATION)
  text: String
  author: User! @relation(name: "UserMessage")
  chatroom: Chatroom! @relation(name: "ChatroomMessage")
}

enum MessageType {
  IMAGE,
  TEXT
}

enum Role {
  SV
}

enum FixRequestState {
  OPEN
  SOLVED
}
